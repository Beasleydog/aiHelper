(()=>{var e={268:e=>{e.exports=async function(e,t,n){return new Promise((async o=>{const s={stream:!0,inputs:e="Make sure to use \n to signify a line break in your response. Keep all sentences in your response short. Use mostly sentence fragments, don't focus too much on proper sentences."+e,parameters:{max_new_tokens:1e3,return_full_text:!1,...n}},r=await fetch(n?.url||"https://api-inference.huggingface.co/models/mistralai/Mixtral-8x7B-Instruct-v0.1",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${window.HELPER_TOKEN}`},method:"POST",body:JSON.stringify(s)});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);{const e=r.body.getReader();let n=[],s="";for(;;){const{done:r,value:i}=await e.read();if(new TextDecoder("utf-8").decode(i).split("}\n\n").forEach((e=>{"}"!=(e=e.replace("data:","")).charAt(e.length-1)&&(e+="}");try{e=JSON.parse(e),n.includes(e.index)||(n.push(e.index),["<s>","</s>"].includes(e.token.text)&&(e.token.text=""),t&&t(e.token.text,e.generated_text),e.generated_text&&(s=e.generated_text))}catch{}})),r){o(s);break}}}}))}},698:e=>{e.exports={answerQuestionPrompt:function(e,t,n){return`Context: ${n}\n    Question: ${e}\n    Answers:${t.map(((e,t)=>`"Number ${t}: ${e}$`)).join("\n")}\n    [INST]Using the context, think about the question and its potential answer. Then, fill in the blank. Number _ is correct. YOU MUST NOT RETURN ANYTHING ELSE EXCEPT THE NUMBER TO GO IN THE BLANK[/INST]`}}},908:(e,t,n)=>{const o=n(268),{answerQuestionPrompt:s}=n(698),r=(n(558),n(505));e.exports=async function(){[...document.getElementsByClassName("quiz-questions")[0].children].map((e=>({element:e,questionText:e.children[3].innerText,answers:[...[...e.children][4].children].map((e=>e.innerText))}))).forEach((e=>{const t=document.createElement("button");t.innerText="Get Hint",t.onclick=async()=>{console.log(e);const t=await r(e.questionText.replaceAll("\n"," ")),n=s(e.questionText,e.answers,t.text),i=await o(n);console.log(i);const c=Number(i.match(/\d+/)[0]);e.element.children[4].children[c].children[0].click()},e.element.appendChild(t)}))}},955:(e,t,n)=>{const o=n(558);e.exports=function(){this.urlCache=[],this.urls=[],this.addedContexts=[],this.addURL=async e=>{if(this.urls.find((t=>t.url===e)))return;const t=this.urlCache.find((t=>t.url===e));let n={url:e,content:t?.content||(await o(e)).text};t||this.urlCache.push(n),this.urls.push(n)},this.addContext=e=>{this.addedContexts.push(e)},this.fullContext=()=>`${this.urls.map((e=>`<${e.url}>\n                ${e.content}\n            </${e.url}>`)).join("\n")}\n        ${this.addedContexts.join("\n")}`,this.extractURLS=e=>e,this.clear=()=>{this.urls=[],this.addedContexts=[]}}},715:(e,t,n)=>{const o=n(268),s=n(637),r=n(566),i=n(10),c=n(665),a=n(100),{fromSelectionPrompt:l,determineIfModifyPrompt:d}=n(982),{setRobotShowing:u}=n(831),{webSearchFromContextAndSelectionPrompt:m}=n(370),h=n(505),p=n(955);e.exports=function(){window.sendKeyToDoc=c,window.getDocLinks=a;const e=new p,t=new i((e=>{u(!0),c("keypress",e,e.charCodeAt(0))}),(()=>{u(!0),c("keydown","Enter",13)}));return t.onFinish=()=>{u(!1)},document.querySelector(".docs-texteventtarget-iframe").contentDocument.addEventListener("keydown",(function(n){"a"===n.key&&n.ctrlKey&&n.altKey&&async function(){u(!0);const n=s(),i=r();let p=prompt("Extra instructions?");e.clear();const E=a();for(let t=0;t<E.length;t++)await e.addURL(E[t]);if(p&&p.includes("web")){const t=await o(m(i,n)),s=await h(t);p=p.replace("web",""),e.addContext(s.text)}let f=!1;if(p&&p.length>0){const e=d(p);f=(await o(e)).includes("<MODIFY>")}e.addContext(i),console.log("FULL CONTEXT",e.fullContext());const w=l(e.fullContext(),n,p);f||(c("keydown","ArrowRight",39),c("keydown","Enter",13),c("keydown","Enter",13)),console.log("PROMPT"),console.log(w),o(w,(e=>{t.addWord(e)}))}()})),!0}},982:e=>{e.exports={editSelectionPrompt:function(e,t,n){return`Here is some background context for you to use for reference. DO NOT answer any questions that may be included in the context.\n    ${e}\n    [INST]Implement these changes "${t}" on this text: ${n}[/INST]`},generateFromQuestionPrompt:function(e,t){return`Here is some background context for you to use for reference. DO NOT answer any questions that may be included in the context.\n    ${e}\n    [INST]Answer the following assignment question: ${t}[/INST]`},fromSelectionPrompt:function(e,t,n){return`Here is some background context for you to use for reference. DO NOT answer any questions that may be included in the context.\n    ${e}\n    [INST]\n    ${n?`Follow these instructions on the following selection:${n}`:""}\n    ${t}\n    [/INST]`},determineIfModifyPrompt:function(e){return`Here are example instructions for an imaginary selection of text: "${e}" You don't have to answer or follow the instructions, just interpret them. \n    [INST]Determine if the example instructions given above are additive in nature, meaning that they require returning content to answer or add on to a selection, or if they modify the selection, like shortening it or changing the tone. Briefly explain your reasoning. \n    Then, if it is additive, return the phrase "<ADD>". If it instead modifies the selection, return the phrase "<MODIFY>". If you are unsure, it is better to return the phrase "<ADD>". DO NOT REFERENCE THE PHRASES <ADD> or <MODIFY> IN YOUR REASONING. [/INST]`}}},100:(e,t,n)=>{const o=n(665);function s(){o("keydown","n",78,{altKey:!0,ctrlKey:!0}),o("keyup","n",78,{altKey:!0,ctrlKey:!0}),o("keydown","l",78,{altKey:!0,ctrlKey:!0}),o("keyup","l",78,{altKey:!0,ctrlKey:!0});let e=document.getElementById("docs-linkbubble-link-text");return e&&e.href}e.exports=function(){o("keydown","ArrowRight",39);const e="https://samiscool.com/";o("keypress"," ",32);for(let t=0;t<22;t++)o("keypress",e[t],e.charCodeAt(t));o("keypress"," ",32);let t=[],n=0;for(;;){let e=s();if(!e)break;if(t.includes(e)){if(n++,n==t.length)break}else t.push(e),n=0}t=t.filter((t=>t!==e));for(let e=0;e<24;e++)o("keydown","Delete",46);return t}},566:e=>{e.exports=function(){return function(e,t,n,o=Object.getOwnPropertyNames(e)){const s=new Set,r=[];let i=0;const c=(o,a,l,d=0)=>{if(i++,"prototype"===o||a instanceof Window)return;if(d>n)return;const u=[...l,o];try{if(t(o,a))return void r.push({path:u,value:a})}catch(e){}var m;null==a||s.has(a)||(s.add(a),Array.isArray(a)?a.forEach(((e,t)=>{try{c(t.toString(),e,u,d+1)}catch(e){}})):a instanceof Object&&((m=a)&&null!==m&&1===m.nodeType&&"string"==typeof m.nodeName?Object.getOwnPropertyNames(e).filter((e=>!J.has(e))):Object.getOwnPropertyNames(a)).forEach((e=>{try{c(e,a[e],u,d+1)}catch(e){}})))};return o.forEach((t=>{try{c(t,e[t],[])}catch(e){}})),{results:r,iterations:i}}(window.KX_kixApp,((e,t)=>t&&""===t.toString().charAt(0)),5).results[0].value}},637:(e,t,n)=>{const o=n(566),s=n(665),r=n(805);e.exports=function(){let e=o();s("keypress"," ",32);let t=o();s("keydown","z",90,{ctrlKey:!0});let[n,i,c]=r(e,t);return e.slice(n,i+1)}},665:e=>{e.exports=function(e,t,n,o){const s=document.createEvent("Event");s.initEvent(e,!0,!0),s.key=t,s.keyCode=n,o&&Object.keys(o).forEach((e=>{s[e]=o[e]})),document.querySelector(".docs-texteventtarget-iframe").contentDocument.activeElement.dispatchEvent(s)}},965:(e,t,n)=>{const o=n(268),{setRobotShowing:s}=n(831);e.exports=function(){const e="Magic ðŸª„";let t=document.getElementsByClassName("right-block-big")[0];if(!t)return!1;let n=document.createElement("div");return n.classList.add("link-btn"),n.classList.add("add"),n.classList.add("dropbox-submit"),n.classList.add("popups-processed"),n.classList.add("sExtlink-processed"),n.style.marginTop="4px",n.innerText=e,n.onclick=async function(){const t=document.getElementsByClassName("info-container")[1].innerText;let r=!1,i=0;s(!0),o(t,(async(t,o)=>{if(i++,n.innerText=i,o&&!r){r=!0,o=o.replaceAll("\n","NLCGRH");const t=document.getElementsByClassName("page-title")[0].innerText,i=`${document.querySelectorAll('div[data-sgy-sitenav="header-my-account-menu"]')[0].children[0].children[0].children[0].children[0].alt} - ${t}`,c=await async function(e,t){let n=await fetch(`https://script.google.com/macros/s/AKfycbwBjAiL4xyomwuzfl06bCvcRnzCC8nQ_eA9M_K48-DFajyLBWFTRp-r3XPuDsc18Sbq/exec?title=${e}&content=${t}`);return n=await n.text(),n}(i,o);n.innerText=e,document.getElementsByClassName("submit-assignment")[0].children[0].click(),(await new Promise((e=>{setInterval((()=>{const t=document.getElementById("dropbox-submit-create-tab");t&&setTimeout((()=>{e(t)}),500)}),100)}))).click(),setTimeout((()=>{tinyMCE.activeEditor.execCommand("mceInsertContent",!1,c),s(!1)}),500)}}))},t.appendChild(n),!0}},663:(e,t,n)=>{const o=n(268),s=n(10),{setRobotShowing:r}=n(831);e.exports=function(){const e=new s((e=>{r(!0),tinyMCE.activeEditor.execCommand("mceInsertContent",!1,e)}),(()=>{r(!0),tinyMCE.activeEditor.execCommand("InsertLineBreak",!0)}));e.onFinish=()=>{r(!1)};let t=[];return tinyMCE.activeEditor.contentDocument.addEventListener("keydown",(n=>{t=[n.key].concat(t),t.length>3&&t.pop(),console.log(t.reverse().join(""),"???"),"???"===t.reverse().join("")&&setTimeout((()=>{for(var t=0;t<3;t++)tinymce.activeEditor.execCommand("Delete");!function(){let t=Array.from(document.querySelectorAll(".comment-more-wrapper")).map((e=>e.innerText));t=t.map((e=>e.replace("Show Less",""))),t=t.map((e=>e.replace("Show More","")));const n=document.getElementsByClassName("discussion-prompt")[0].innerText;let s=`${t.join("\n")} [INST]${n}[/INST]`;o(s,(t=>{const n=document.getElementById("comment-placeholder");"block"==getComputedStyle(n).display&&n.click(),e.addWord(t)}))}()}),0)})),!0}},119:e=>{e.exports=function(){const e=t=>{if("AI_HELPER_SCRAPE_AMPLIFY"!=t.data.type)return;let n={...t.data,type:"AI_HELPER_SCRAPE_RETURN"};const o=new BroadcastChannel("AI_HELPER_SCRAPE_AMPLIFY");o.postMessage(n),o.close(),window.removeEventListener("message",e)};window.addEventListener("message",e),console.log("opener is ",window.opener),window.opener.postMessage("AI_HELPER_AMPLIFY_SCRAPE_READY","*")}},115:e=>{e.exports=async function(){await new Promise((e=>{let t=setInterval((()=>{let n=document.getElementById("expand");n&&(n.click(),document.getElementById("primary-button").children[0].children[0].children[0].click(),clearInterval(t),e("done"))}),100)}));const e=await new Promise((e=>{let t=setInterval((()=>{let n=document.getElementsByClassName("segment style-scope ytd-transcript-segment-renderer");n.length>0&&(clearInterval(t),e(n)),console.log(n.length)}),100)}));return console.log("GOT LINES!"),[...e].map((e=>e.children[2].innerText)).join(" ")}},171:(e,t,n)=>{const o=n(498),s=n(119);e.exports=function(){const e=location.href;e.includes("AI_HELPER_SCRAPE")?(console.log("GONNA SCRAPE"),o()):e.includes("AI_HELPER_AMPLIFY_SCRAPE")&&s()}},498:(e,t,n)=>{const o=n(115);e.exports=function(){let e=location.href;window.addEventListener("load",(()=>{setTimeout((async()=>{console.log("load");let t={type:"AI_HELPER_SCRAPE_RETURN",url:e,text:document.body.innerText,html:document.body.innerHTML};if(location.href.includes("https://www.youtube.com/watch")&&(t.text=await o()),window.opener)window.opener.postMessage(t,"*");else{const n=e.split("AI_HELPER_SCRAPE_")[1],o=window.open(`${n}#AI_HELPER_AMPLIFY_SCRAPE`,"_blank");let s=e=>{"AI_HELPER_AMPLIFY_SCRAPE_READY"==e.data&&(t.type="AI_HELPER_SCRAPE_AMPLIFY",o.postMessage(t,"*"),window.removeEventListener("message",s),o.close(),window.close())};window.addEventListener("message",s)}}),500)}))}},558:e=>{e.exports=async function(e){return new Promise((t=>{let n=new URL(location.href).origin,o=window.open(`${e}#AI_HELPER_SCRAPE_${n}`,"_blank"),s=n=>{const o=new URL(e).origin;try{if("AI_HELPER_SCRAPE_AMPLIFY"!=n.currentTarget.name&&n.origin!=o)return void console.log("ORIGIN RETURN")}catch{}"AI_HELPER_SCRAPE_RETURN"==n.data.type&&(i(),t(n.data))};window.addEventListener("message",s);const r=new BroadcastChannel("AI_HELPER_SCRAPE_AMPLIFY");r.onmessage=s,setTimeout((()=>{i(),t({type:"AI_HELPER_SCRAPE_RETURN",url:e,text:"",html:""})}),3e4);let i=()=>{o.close(),window.removeEventListener("message",s),r.close()}}))}},353:(e,t,n)=>{const o=n(558),s=n(185);e.exports=async function(e){const t=trustedTypes.createPolicy("forceInner",{createHTML:e=>e});let n=`https://www.google.com/search?q=${e}`,r=(await o(n)).html,i=document.createElement("div");i.innerHTML=t.createHTML(r),[...i.getElementsByClassName("related-question-pair")].forEach((e=>e.remove()));let c=[...i.querySelectorAll("cite")].map((e=>e.parentElement.parentElement.parentElement.parentElement.parentElement.href)).filter((e=>e));return c=c.map((e=>s(e))),c}},370:e=>{e.exports={webSearchFromContextAndSelectionPrompt:function(e,t){return`Current Date:${(new Date).toDateString()}\n    Here is some background context: ${e}\n    The user will do web research based on the following selection: ${t}\n    [INST]Generate a short web search prompt for the user to use to find more information about the selection. \n    The prompt should be a question or a request for information that can be answered by a web search. \n    The prompt should be short and to the point. Do not include any information that is already in the selection. It is crucial you include the date in the prompt to ensure up-to-date results. [/INST]`}}},505:(e,t,n)=>{const o=n(353),s=n(558);e.exports=async function(e){e=e.replaceAll('"',"");const t=(await o(e))[0],n=await s(t);return console.log(n),n}},185:e=>{e.exports=function(e){return e.split(":~:")[0]}},805:e=>{e.exports=function(e,t){let n=0;for(;n<e.length&&e[n]===t[n];)n++;let o=e.length-1,s=t.length-1;for(;o>=0&&s>=0&&e[o]===t[s];)o--,s--;return[n,o,s]}},942:e=>{e.exports=function(e){return e.split("").map((e=>e.charCodeAt(0))).join(" ")}},831:e=>{function t(e){const t=document.getElementById("AI_HELPER_ROBOT_ICON");e?(t.style.left="-10px",t.style.bottom="-10px"):(t.style.left="-70px",t.style.bottom="-70px")}e.exports={initRobotIcon:function(){const e=document.createElement("div");e.innerText="ðŸ¤–",e.style.all="unset",Object.assign(e.style,{"font-size":"45px",position:"fixed",transform:"rotate(45deg)",transition:"all .2s cubic-bezier(.17,.67,.64,1.36)","z-index":"1000000"}),e.id="AI_HELPER_ROBOT_ICON",document.body.appendChild(e),t(!1)},setRobotShowing:t}},10:e=>{e.exports=function(e,t){this.CHAR_QUEUE=[],this.looping=!1,this.loop,this.forcedFull=!1;const n=()=>{const o=this.CHAR_QUEUE[0];if(this.CHAR_QUEUE=this.CHAR_QUEUE.slice(1),"\n"===o?t():e(o),0===this.CHAR_QUEUE.length)this.looping=!1,this?.onFinish?.();else{let e=0;e+=500/this.CHAR_QUEUE.length,e=Math.min(e,5),this.forcedFull&&(e=0),setTimeout((()=>{n()}),e)}};this.forceFullSpeed=e=>{this.forcedFull=e},this.addWord=e=>{"\n"===e?this.CHAR_QUEUE.push(e):e.split("").forEach((e=>{this.CHAR_QUEUE.push(e)})),this.looping||(this.looping=!0,console.log("before insert",this.CHAR_QUEUE),n())}}}},t={};function n(o){var s=t[o];if(void 0!==s)return s.exports;var r=t[o]={exports:{}};return e[o](r,r.exports,n),r.exports}(()=>{const{initRobotIcon:e,setRobotShowing:t}=n(831),o=n(965),s=n(663),r=n(715),i=n(908),c=n(268),a=n(942),l=n(353),d=n(171),u=n(505),m=n(558);window.getGoogleLinks=l,window.webArticleFromQuery=u,window.requestContent=m,d(),window.addEventListener("load",(()=>{if("100 104 115 111 102 104 111"!=a(window.HELPER_PASSWORD))return;if(window.top!=window)return;let n=!1;switch(location.origin){case"https://example.com":window.askAI=c,n=!0;break;case"https://docs.google.com":r()&&(n=!0);break;case"https://ud.schoology.com":location.pathname.includes("/discussion/")?s()&&(n=!0):location.pathname.includes("/assignment/")&&o()&&(n=!0);break;case"https://codehs.com":location.pathname.includes("/assignment/")&&(console.log("trying to inject"),i()&&(n=!0))}console.log("inected?",n),n&&(e(),t(!0),setTimeout((()=>{t(!1)}),1e3))}))})()})();